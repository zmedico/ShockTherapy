<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.1//EN"
    "http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, user-scalable=no" />
<title></title>
<link rel="stylesheet" type="text/css" href="../../css/fullscreen.css" />
<style type="text/css">
<!--

body.center {
	display: table;
	text-align: center;
}

-->
</style>
<script type="text/javascript">"use strict";</script>
<script src="../../js/Function.prototype.bind.js" type="text/javascript"></script>
<script src="../../js/require.js" type="text/javascript"></script>
<script type="text/javascript">require.path = "../../js";</script>
<script src="../loadTheme.js" type="text/javascript"></script>
<script type="text/javascript">
<!--
	loadTheme("../..", function(shockTherapyConfig,
		resourceFactory, resources) {
			require([
				"DrawableCanvas",
				"colorsys"
			], function() {

				this.RainbowDrawable = (function() {
					var constructor = function() {
						this._imageData = null;
					}

					constructor.prototype.setBounds = function(bounds)
					{
						this.bounds = bounds;
					}

					constructor.prototype.getBounds = function()
					{
						return this.bounds;
					}

					constructor.prototype.draw = function(context)
					{
						var box = this.bounds;
						if (this._imageData === null ||
							this._imageData.width != box.w ||
							this._imageData.height != box.h)
							this._imageData = context.createImageData(box.w, box.h);
						var imageData = this._imageData;
						var data = imageData.data;
						var colors = [];
						for (var x = 0; x < box.w; x++)
							colors.push(colorsys.hls_to_rgb(x / box.w, 0.5, 1.0));
						var color;
						var i = 0;
						for (var y = 0; y < box.h; y++)
							for (var x = 0; x < box.w; x++) {
								color = colors[x];
								// rgba
								data[i++] = color.r * 255;
								data[i++] = color.g * 255;
								data[i++] = color.b * 255;
								data[i++] = 255;
							}

						context.putImageData(imageData, box.x, box.y);
					}

					return constructor;
				}());

				var drawableCanvas = new DrawableCanvas(
					new RainbowDrawable(), document.getElementById("drawableCanvas"));
				drawableCanvas.repaint();
			});
	});
-->
</script>
</head>
<body class="fullscreen center">
	<div id="content" class="vertCenter">
		<object id="drawableCanvas" style="margin-left: auto; margin-right: auto;" width="240" height="180" ></object>
	</div>
</body>
</html>
